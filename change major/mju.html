<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>คำร้องขอโอนย้ายสาขา</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-50 min-h-screen">

    <header class="bg-green-800 text-white">
        <div class="container mx-auto flex items-center justify-between py-3 px-4 md:px-8">
            <div class="flex items-center space-x-3">
                <img src="https://upload.wikimedia.org/wikipedia/th/thumb/b/b7/MJU_LOGO.svg/1024px-MJU_LOGO.svg.png"
                    alt="โลโก้มหาวิทยาลัย" class="w-12 h-12 object-contain" />
                <span class="font-bold text-lg select-none">มหาวิทยาลัยตัวอย่าง</span>
            </div>
            <h1 class="text-xl font-semibold text-center flex-1 md:mx-8 select-none">คำร้องขอโอนย้ายสาขาวิชาต่างคณะ</h1>
            <button id="hamburger" class="absolute top-3 right-4 md:static md:ml-4 md:order-last focus:outline-none"
                aria-label="เมนู">
                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <line x1="3" y1="6" x2="21" y2="6" />
                    <line x1="3" y1="12" x2="21" y2="12" />
                    <line x1="3" y1="18" x2="21" y2="18" />
                </svg>
            </button>
        </div>
    </header>

    <main class="container-center mx-auto p-6 md:p-8 bg-white mt-6 rounded shadow-md max-w-3xl">
        <form action="" method="post" id="transfer-form" class="space-y-6 text-gray-800">
            <div>
                <small id="note-toggle"
                    class="text-green-700 cursor-pointer font-semibold underline">คุณสมบัติในการขอโอนย้าย*</small>
                <p id="note-text"
                    class="note hidden mt-2 p-3 bg-green-50 border border-green-300 rounded text-green-800 whitespace-pre-line text-sm">
                    หลักสูตร 4 เทียบเข้าเรียน (2ปี)
                    - ได้ศึกษาตามแผนการศึกษาในสาขาวิชาเดิมมาแล้วไม่น้อยกว่า 1 ภาคการศึกษาปกติ
                    - มีหน่วยกิตสะสมไม่น้อยกว่า 18 หน่วยกิต และมีแต้มระดับคะแนนเฉลี่ยสะสมไม่น้อยกว่า 2.00
                    หลักสูตร 4 ปี
                    - ได้ศึกษาตามแผนการศึกษาในสาขาวิชาเดิมมาแล้วไม่น้อยกว่า 2 ภาคการศึกษาปกติ
                    - มีหน่วยกิตสะสมไม่น้อยกว่า 30 หน่วยกิต และมีแต้มระดับคะแนนเฉลี่ยสะสมไม่น้อยกว่า 2.00
                </p>
            </div>

            <div class="flex flex-col md:flex-row md:items-center md:space-x-4">
                <label for="date" class="md:w-40 font-semibold">วันที่กรอก:</label>
                <input type="date" id="date" required
                    class="border border-gray-300 rounded px-3 py-2 w-full md:w-auto focus:outline-none focus:ring-2 focus:ring-green-600" />
            </div>


            <div class="flex flex-col md:flex-row md:items-center md:space-x-4">
                <label for="prefix" class="md:w-40 font-semibold">คำนำหน้า:</label>
                <select id="prefix" required
                    class="border border-gray-300 rounded px-3 py-2 w-full md:w-auto focus:outline-none focus:ring-2 focus:ring-green-600">
                    <option value="">เลือกคำนำหน้า</option>
                    <option value="นาย">นาย</option>
                    <option value="นาง">นาง</option>
                    <option value="นางสาว">นางสาว</option>
                </select>
            </div>

            <div class="flex flex-col md:flex-row md:items-center md:space-x-4">
                <label for="name" class="md:w-40 font-semibold">ชื่อ-นามสกุล:</label>
                <div class="flex-1">
                    <input type="text" id="name" required
                        class="border border-gray-300 rounded px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-green-600" />
                    <span id="name-error" class="text-red-600 text-sm"></span>
                </div>
            </div>

            <div class="flex flex-col md:flex-row md:items-center md:space-x-4">
                <label for="student-id" class="md:w-40 font-semibold">รหัสนักศึกษา:</label>
                <div class="flex-1">
                    <input type="text" id="student-id" maxlength="10" required
                        class="border border-gray-300 rounded px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-green-600" />
                    <span id="student-id-error" class="text-red-600 text-sm"></span>
                </div>
            </div>

            <div class="flex flex-col md:flex-row md:items-center md:space-x-4">
                <label for="phone" class="md:w-40 font-semibold">เบอร์โทรศัพท์:</label>
                <div class="flex-1">
                    <input type="tel" id="phone" maxlength="10" required
                        class="border border-gray-300 rounded px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-green-600" />
                    <span id="phone-error" class="text-red-600 text-sm"></span>
                </div>
            </div>

            <div class="flex flex-col md:flex-row md:items-center md:space-x-4">
                <label for="program" class="md:w-40 font-semibold">หลักสูตร:</label>
                <select id="program" required
                    class="border border-gray-300 rounded px-3 py-2 w-full md:w-auto focus:outline-none focus:ring-2 focus:ring-green-600">
                    <option value="" disabled selected>เลือกหลักสูตร</option>
                    <option value="Normal">4-5 ปี</option>
                    <option value="Fast Track">4 ปีเทียบเข้าเรียน 2 ปี</option>
                </select>
            </div>

            <div class="flex flex-col md:flex-row md:items-center md:space-x-4">
                <label for="semester" class="md:w-40 font-semibold">ภาค:</label>
                <select id="semester" required
                    class="border border-gray-300 rounded px-3 py-2 w-full md:w-auto focus:outline-none focus:ring-2 focus:ring-green-600">
                    <option value="" disabled selected>เลือกภาค</option>
                    <option value="1">ภาคปกติ</option>
                    <option value="2">ภาคสมทบ</option>
                </select>
            </div>

            <div class="flex flex-col md:flex-row md:items-center md:space-x-4">
                <label for="current-major" class="md:w-40 font-semibold">สาขาวิชาปัจจุบัน:</label>
                <div class="flex-1">
                    <input type="text" id="current-major" required
                        class="border border-gray-300 rounded px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-green-600" />
                    <span id="current-major-error" class="text-red-600 text-sm"></span>
                </div>
            </div>

            <div class="flex flex-col md:flex-row md:items-center md:space-x-4">
                <label for="current-faculty" class="md:w-40 font-semibold">คณะปัจจุบัน:</label>
                <div class="flex-1">
                    <input type="text" id="current-faculty" required
                        class="border border-gray-300 rounded px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-green-600" />
                    <span id="current-faculty-error" class="text-red-600 text-sm"></span>
                </div>
            </div>

            <div class="flex flex-col md:flex-row md:items-center md:space-x-4">
                <label for="new-major" class="md:w-40 font-semibold">สาขาวิชาที่ต้องการย้าย:</label>
                <div class="flex-1">
                    <input type="text" id="new-major" required
                        class="border border-gray-300 rounded px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-green-600" />
                    <span id="new-major-error" class="text-red-600 text-sm"></span>
                </div>
            </div>

            <div class="flex flex-col md:flex-row md:items-center md:space-x-4">
                <label for="new-faculty" class="md:w-40 font-semibold">คณะที่ต้องการย้าย:</label>
                <div class="flex-1">
                    <input type="text" id="new-faculty" required
                        class="border border-gray-300 rounded px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-green-600" />
                    <span id="new-faculty-error" class="text-red-600 text-sm"></span>
                </div>
            </div>

            <div class="flex flex-col w-full">
                <label for="reason" class="md:w-40 font-semibold">เหตุผลในการย้าย:</label>
                <textarea id="reason" rows="4" required
                    class="border border-gray-300 rounded px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-green-600"></textarea>

                <span id="reason-error" class="text-red-600 text-sm tm-1"></span>
            </div>

            <div class="text-center">
                <button type="submit"
                    class="bg-green-700 hover:bg-green-800 text-white font-semibold px-6 py-3 rounded shadow transition-colors duration-300">
                    ส่งคำร้อง
                </button>
            </div>
        </form>
    </main>

    <!-- Modal -->
    <div id="modal" class="hidden fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50">
        <div class="bg-white p-6 rounded shadow max-w-sm w-full mx-4 text-center">
            <h2 class="text-xl font-bold mb-4">ผลการส่งคำร้อง</h2>
            <p id="modal-message" class="mb-6 text-gray-700"></p>
            <button id="close-modal"
                class="bg-green-600 hover:bg-green-700 text-white font-semibold px-5 py-2 rounded transition-colors duration-300">
                ปิด
            </button>
        </div>
    </div>

    <script>
        const form = document.getElementById('transfer-form');
        const noteToggle = document.getElementById('note-toggle');
        const noteText = document.getElementById('note-text');
        const modal = document.getElementById('modal');
        const modalMessage = document.getElementById('modal-message');
        const closeModal = document.getElementById('close-modal');



        // สลับซ่อน/แสดง หมายเหตุ
        noteToggle.addEventListener('click', () => {
            noteText.classList.toggle('hidden');
        });

        form.addEventListener('submit', function (e) {
            e.preventDefault();

            document.getElementById('name-error').textContent = "";
            document.getElementById('student-id-error').textContent = "";
            document.getElementById('phone-error').textContent = "";
            document.getElementById('current-major-error').textContent = "";
            document.getElementById('current-faculty-error').textContent = "";
            document.getElementById('new-major-error').textContent = "";
            document.getElementById('new-faculty-error').textContent = "";
            document.getElementById('reason-error').textContent = "";


            const name = document.getElementById('name').value.trim();
            const studentId = document.getElementById('student-id').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const currentMajor = document.getElementById('current-major').value.trim();
            const currentFaculty = document.getElementById('current-faculty').value.trim();
            const newMajor = document.getElementById('new-major').value.trim();
            const newFaculty = document.getElementById('new-faculty').value.trim();
            const reason = document.getElementById('reason').value.trim();

            if (name.length < 2) {
                document.getElementById('name-error').textContent = "กรุณากรอกชื่อ-นามสกุลอย่างน้อย 2 ตัวอักษร";
                return;
            }

            if (!/^\d{10}$/.test(studentId)) {
                document.getElementById('student-id-error').textContent = "รหัสนักศึกษาต้องมี 10 หลัก";
                return;
            }

            if (!/^0\d{9}$/.test(phone)) {
                document.getElementById('phone-error').textContent = "เบอร์โทรต้องขึ้นต้นด้วย 0 และมี 10 หลัก";
                return;
            }

            if (!currentMajor.startsWith("สาขา") || currentMajor.length < 4) {
                document.getElementById('current-major-error').textContent = "ต้องขึ้นต้นด้วยคำว่า สาขา";
                return;
            }

            if (!currentFaculty.startsWith("คณะ") || currentFaculty.length < 4) {
                document.getElementById('current-faculty-error').textContent = "ต้องขึ้นต้นด้วยคำว่า คณะ";
                return;
            }

            if (currentMajor === newMajor) {
                document.getElementById('new-major-error').textContent = "สาขาวิชาที่ต้องการย้าย ต้องไม่ตรงกับสาขาวิชาปัจจุบัน";
                return;
            }

            if (!newMajor.startsWith("สาขา") || newMajor.length < 4) {
                document.getElementById('new-major-error').textContent = "ต้องขึ้นต้นด้วยคำว่า สาขา";
                return;
            }

            if (!newFaculty.startsWith("คณะ") || newFaculty.length < 4) {
                document.getElementById('new-faculty-error').textContent = "ต้องขึ้นต้นด้วยคำว่า คณะ";
                return;
            }

            if (currentFaculty.toLowerCase() === newFaculty.toLowerCase()) {
                document.getElementById('new-faculty-error').textContent = "คณะที่ต้องการย้าย ต้องไม่ตรงกับคณะปัจจุบัน";
                return;
            }

            if (reason.length < 5) {
                document.getElementById('reason-error').textContent = "กรุณากรอกเหตุผลในการย้าย";
                return;
            }

            modalMessage.textContent = "ส่งคำร้องสำเร็จ!";
            modal.classList.remove('hidden');

            form.reset();
        });

        closeModal.addEventListener('click', () => {
            modal.classList.add('hidden');
        });
        modal.addEventListener("click", function (e) {
            if (e.target === modal) {
                modal.classList.add("hidden");
            }
        });
    </script>
</body>

</html>